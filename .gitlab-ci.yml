include:
  - template: Jobs/Code-Quality.gitlab-ci.yml

image: java:8

maven test:
  stage: test
  script:
    - ./mvnw test
  only:
    - branches
  artifacts:
    reports:
      junit: "**/TEST-*.xml"

maven build:
  stage: build
  script:
  #  - ./mvnw package
    - ./mvnw clean install -DskipTests
  artifacts:
    paths:
      - "target/*.jar"
    expire_in: 1d

code_quality:
  variables:
    REPORT_FORMAT: html
  artifacts:
    expose_as: 'Code Quality Report'
    paths: [gl-code-quality-report.html]
